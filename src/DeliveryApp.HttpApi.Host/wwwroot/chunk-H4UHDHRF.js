import{a as b}from"./chunk-UHU4RJ54.js";import{a as Z}from"./chunk-AUVTR7ER.js";import"./chunk-GGQ7LRWG.js";import"./chunk-W4AHS3DZ.js";import{a as J}from"./chunk-UMVVOU4F.js";import"./chunk-3XTS6IX6.js";import{a as G,b as F,c as V,e as B,f as q,g as N}from"./chunk-VE33HBPU.js";import{a as U,b as W}from"./chunk-RKVGNEAU.js";import{a as Q,b as Y}from"./chunk-YYCZXRKQ.js";import{b as $}from"./chunk-YG2AVUDB.js";import{$a as A,Za as L,ab as j,g as k,h as R,n as H,na as M}from"./chunk-F6AVZLPP.js";import{H as T,L as E,Sb as g,Tb as i,Ub as e,Vb as z,Wb as S,Xb as y,Zb as C,ba as _,cc as p,dc as c,fb as r,ia as I,kb as u,n as O,pc as h,q as P,rb as w,rc as n,sa as v,sb as D,sc as o,ta as f,tc as l,xb as x}from"./chunk-PBCT4LDD.js";var K=(()=>{class a{static \u0275fac=function(s){return new(s||a)};static \u0275mod=D({type:a});static \u0275inj=I({imports:[b,M,b,M]})}return a})();function et(a,d){if(a&1&&(i(0,"div",6),z(1,"mat-spinner"),i(2,"p"),n(3),e()()),a&2){let t=c();r(3),o(t.translationService.translate("loading"))}}function it(a,d){if(a&1&&(i(0,"mat-icon"),n(1,"star"),e()),a&2){let t=d.$implicit;h("filled",t)}}function nt(a,d){if(a&1){let t=C();i(0,"div",7)(1,"div",8)(2,"mat-card",9)(3,"mat-card-header")(4,"mat-icon",10),n(5,"attach_money"),e(),i(6,"mat-card-title"),n(7),e()(),i(8,"mat-card-content")(9,"div",11),n(10),e(),i(11,"div",12)(12,"mat-icon"),n(13),e(),n(14),e()()(),i(15,"mat-card",13)(16,"mat-card-header")(17,"mat-icon",14),n(18,"local_shipping"),e(),i(19,"mat-card-title"),n(20),e()(),i(21,"mat-card-content")(22,"div",15)(23,"div",16)(24,"span",17),n(25),e(),i(26,"span",18),n(27),e()(),i(28,"div",16)(29,"span",17),n(30),e(),i(31,"span",19),n(32),e()(),i(33,"div",16)(34,"span",17),n(35),e(),i(36,"span",20),n(37),e()()()()(),i(38,"mat-card",21)(39,"mat-card-header")(40,"mat-icon",22),n(41,"people"),e(),i(42,"mat-card-title"),n(43),e()(),i(44,"mat-card-content")(45,"div",23)(46,"div",24)(47,"span",17),n(48),e(),i(49,"span",25),n(50),e()(),i(51,"div",24)(52,"span",17),n(53),e(),i(54,"span",26),n(55),e()(),i(56,"div",24)(57,"span",17),n(58),e(),i(59,"span",27),n(60),e()()()()(),i(61,"mat-card",28)(62,"mat-card-header")(63,"mat-icon",29),n(64,"store"),e(),i(65,"mat-card-title"),n(66),e()(),i(67,"mat-card-content")(68,"div",30)(69,"div",31)(70,"span",17),n(71),e(),i(72,"span",25),n(73),e()(),i(74,"div",31)(75,"span",17),n(76),e(),i(77,"span",26),n(78),e()(),i(79,"div",31)(80,"span",17),n(81),e(),i(82,"span",32),n(83),e()()()()(),i(84,"mat-card",33)(85,"mat-card-header")(86,"mat-icon",34),n(87,"star_rate"),e(),i(88,"mat-card-title"),n(89),e()(),i(90,"mat-card-content")(91,"div",35)(92,"div",36)(93,"span",37),n(94),e(),i(95,"div",38),x(96,it,2,2,"mat-icon",39),e()(),i(97,"div",40)(98,"div",41)(99,"span",17),n(100),e(),i(101,"span",25),n(102),e()(),i(103,"div",41)(104,"span",17),n(105),e(),i(106,"span",42),n(107),e()(),i(108,"div",41)(109,"span",17),n(110),e(),i(111,"span",43),n(112),e()()()()()()(),i(113,"mat-card",44)(114,"mat-card-header")(115,"mat-card-title"),n(116),e()(),i(117,"mat-card-content")(118,"div",45)(119,"button",46),p("click",function(){v(t);let m=c();return f(m.navigateToCurrentDeliveries())}),i(120,"mat-icon"),n(121,"local_shipping"),e(),n(122),e(),i(123,"button",47),p("click",function(){v(t);let m=c();return f(m.navigateToReviews())}),i(124,"mat-icon"),n(125,"star_rate"),e(),n(126),e(),i(127,"button",48),p("click",function(){v(t);let m=c();return f(m.navigateToStores())}),i(128,"mat-icon"),n(129,"store"),e(),n(130),e(),i(131,"button",48),p("click",function(){v(t);let m=c();return f(m.navigateToCustomers())}),i(132,"mat-icon"),n(133,"people"),e(),n(134),e()()()()()}if(a&2){let t=c();r(7),o(t.translationService.translate("totalSales")),r(3),o(t.formatCurrency(t.overview.sales.totalAmount)),r(),h("positive",t.overview.sales.trendPercentage>0)("negative",t.overview.sales.trendPercentage<0),r(2),o(t.overview.sales.trendPercentage>0?"trending_up":"trending_down"),r(),l(" ",t.Math.abs(t.overview.sales.trendPercentage),"% "),r(6),o(t.translationService.translate("deliveries")),r(5),l("",t.translationService.translate("currentDeliveries"),":"),r(2),o(t.overview.deliveries.currentDeliveries),r(3),l("",t.translationService.translate("completedOrders"),":"),r(2),o(t.overview.deliveries.completedDeliveries),r(3),l("",t.translationService.translate("cancelledOrders"),":"),r(2),o(t.overview.deliveries.cancelledDeliveries),r(6),o(t.translationService.translate("customers")),r(5),l("",t.translationService.translate("total"),":"),r(2),o(t.overview.customers.totalCustomers),r(3),l("",t.translationService.translate("active"),":"),r(2),o(t.overview.customers.activeCustomers),r(3),l("",t.translationService.translate("newCustomers"),":"),r(2),o(t.overview.customers.newCustomers),r(6),o(t.translationService.translate("stores")),r(5),l("",t.translationService.translate("total"),":"),r(2),o(t.overview.stores.totalStores),r(3),l("",t.translationService.translate("active"),":"),r(2),o(t.overview.stores.activeStores),r(3),l("",t.translationService.translate("totalSales"),":"),r(2),o(t.formatCurrency(t.overview.stores.totalSalesAmount)),r(6),o(t.translationService.translate("reviews")),r(5),o(t.overview.reviews.averageRating.toFixed(1)),r(2),g("ngForOf",t.getStarArray(t.overview.reviews.averageRating)),r(4),l("",t.translationService.translate("total"),":"),r(2),o(t.overview.reviews.totalReviews),r(3),l("",t.translationService.translate("positiveReviews"),":"),r(2),o(t.overview.reviews.positiveReviews),r(3),l("",t.translationService.translate("negativeReviews"),":"),r(2),o(t.overview.reviews.negativeReviews),r(4),o(t.translationService.translate("quickActions")),r(6),l(" ",t.translationService.translate("viewCurrentDeliveries")," "),r(4),l(" ",t.translationService.translate("viewReviews")," "),r(4),l(" ",t.translationService.translate("manageStores")," "),r(4),l(" ",t.translationService.translate("manageCustomers")," ")}}function rt(a,d){if(a&1&&(S(0),i(1,"mat-icon"),n(2,"refresh"),e(),n(3),y()),a&2){let t=c(2);r(3),l(" ",t.translationService.translate("refresh")," ")}}function at(a,d){if(a&1&&(S(0),n(1),i(2,"mat-icon"),n(3,"refresh"),e(),y()),a&2){let t=c(2);r(),l(" ",t.translationService.translate("refresh")," ")}}function ot(a,d){if(a&1){let t=C();i(0,"div",49)(1,"mat-icon"),n(2,"error"),e(),i(3,"p"),n(4),e(),i(5,"button",46),p("click",function(){v(t);let m=c();return f(m.refreshData())}),x(6,rt,4,1,"ng-container",50)(7,at,4,1,"ng-container",50),e()()}if(a&2){let t=c();h("rtl",t.translationService.isRTL()),r(4),o(t.translationService.translate("errorLoadingData")),r(2),g("ngIf",!t.translationService.isRTL()),r(),g("ngIf",t.translationService.isRTL())}}var X=class a{constructor(d,t,s){this.dashboardService=d;this.translationService=t;this.router=s}overview=null;isLoading=!1;error=null;Math=Math;destroy$=new O;ngOnInit(){this.loadOverviewData(),T(3e5).pipe(_(this.destroy$)).subscribe(()=>{this.loadOverviewData(!1)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadOverviewData(d=!0){d&&(this.isLoading=!0),this.error=null,this.dashboardService.getDashboardOverview().pipe(_(this.destroy$),E(t=>(this.error=t.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0641\u064A \u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A",this.isLoading=!1,console.error("Error loading overview data:",t),P))).subscribe({next:t=>{console.log("API result:",t),this.overview=t,this.isLoading=!1}})}refreshData(){this.loadOverviewData()}formatCurrency(d){return new Intl.NumberFormat("ar-SY",{style:"currency",currency:"SYP",minimumFractionDigits:0}).format(d)}getStarArray(d){let t=[];for(let s=1;s<=5;s++)t.push(s<=Math.round(d));return t}navigateToCurrentDeliveries(){this.router.navigate(["/dashboard/current-deliveries"])}navigateToReviews(){this.router.navigate(["/dashboard/reviews"])}navigateToStores(){this.router.navigate(["/dashboard/restaurants"])}navigateToCustomers(){this.router.navigate(["/dashboard/customers"])}static \u0275fac=function(t){return new(t||a)(u(J),u(j),u($))};static \u0275cmp=w({type:a,selectors:[["app-overview"]],decls:11,vars:8,consts:[[1,"overview-container"],[1,"overview-header"],["mat-raised-button","","color","primary",3,"click","disabled"],["class","loading-container",4,"ngIf"],["class","overview-content",4,"ngIf"],["class","error-container",3,"rtl",4,"ngIf"],[1,"loading-container"],[1,"overview-content"],[1,"stats-grid"],[1,"stat-card","sales-card"],["mat-card-avatar","",1,"sales-icon"],[1,"stat-value"],[1,"stat-trend"],[1,"stat-card","deliveries-card"],["mat-card-avatar","",1,"deliveries-icon"],[1,"delivery-stats"],[1,"delivery-stat"],[1,"label"],[1,"value","current"],[1,"value","completed"],[1,"value","cancelled"],[1,"stat-card","customers-card"],["mat-card-avatar","",1,"customers-icon"],[1,"customer-stats"],[1,"customer-stat"],[1,"value"],[1,"value","active"],[1,"value","new"],[1,"stat-card","stores-card"],["mat-card-avatar","",1,"stores-icon"],[1,"store-stats"],[1,"store-stat"],[1,"value","sales"],[1,"stat-card","reviews-card"],["mat-card-avatar","",1,"reviews-icon"],[1,"review-stats"],[1,"average-rating"],[1,"rating-value"],[1,"stars"],[3,"filled",4,"ngFor","ngForOf"],[1,"review-counts"],[1,"review-count"],[1,"value","positive"],[1,"value","negative"],[1,"quick-actions-card"],[1,"quick-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","accent",3,"click"],["mat-raised-button","",3,"click"],[1,"error-container"],[4,"ngIf"]],template:function(t,s){t&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),n(3),e(),i(4,"button",2),p("click",function(){return s.refreshData()}),i(5,"mat-icon"),n(6,"refresh"),e(),n(7),e()(),x(8,et,4,1,"div",3)(9,nt,135,43,"div",4)(10,ot,8,5,"div",5),e()),t&2&&(h("rtl",s.translationService.isRTL()),r(3),o(s.translationService.translate("overview")),r(),g("disabled",s.isLoading),r(3),l(" ",s.translationService.translate("refresh")," "),r(),g("ngIf",s.isLoading&&!s.overview),r(),g("ngIf",s.overview),r(),g("ngIf",s.error))},dependencies:[H,k,R,N,G,q,V,B,F,Y,Q,A,L,W,U,K],styles:[".overview-container[_ngcontent-%COMP%]{padding:20px;font-family:Cairo,sans-serif}.overview-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px}.overview-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#333;font-size:28px;font-weight:600}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.stat-card[_ngcontent-%COMP%]{transition:transform .2s,box-shadow .2s}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 20px #0000001a}.stat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding-bottom:10px}.stat-card[_ngcontent-%COMP%]   mat-icon[mat-card-avatar][_ngcontent-%COMP%]{width:40px;height:40px;font-size:24px;display:flex;align-items:center;justify-content:center;border-radius:50%}.sales-icon[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.deliveries-icon[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.customers-icon[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.stores-icon[_ngcontent-%COMP%]{background-color:#9c27b0;color:#fff}.reviews-icon[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#333;margin-bottom:10px}.stat-trend[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px;font-size:14px;font-weight:500}.stat-trend.positive[_ngcontent-%COMP%]{color:#4caf50}.stat-trend.negative[_ngcontent-%COMP%]{color:#f44336}.delivery-stats[_ngcontent-%COMP%], .customer-stats[_ngcontent-%COMP%], .store-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.delivery-stat[_ngcontent-%COMP%], .customer-stat[_ngcontent-%COMP%], .store-stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:5px 0}.label[_ngcontent-%COMP%]{font-size:14px;color:#666}.value[_ngcontent-%COMP%]{font-weight:600;font-size:16px}.value.current[_ngcontent-%COMP%]{color:#2196f3}.value.completed[_ngcontent-%COMP%]{color:#4caf50}.value.cancelled[_ngcontent-%COMP%]{color:#f44336}.value.active[_ngcontent-%COMP%]{color:#4caf50}.value.new[_ngcontent-%COMP%]{color:#ff9800}.value.sales[_ngcontent-%COMP%]{color:#9c27b0}.value.positive[_ngcontent-%COMP%]{color:#4caf50}.value.negative[_ngcontent-%COMP%]{color:#f44336}.review-stats[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.average-rating[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.rating-value[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#ffc107}.stars[_ngcontent-%COMP%]{display:flex;gap:2px}.stars[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#ddd}.stars[_ngcontent-%COMP%]   mat-icon.filled[_ngcontent-%COMP%]{color:#ffc107}.review-counts[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px}.review-count[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.quick-actions-card[_ngcontent-%COMP%]{margin-top:20px}.quick-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:15px}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 20px}.rtl[_ngcontent-%COMP%]{direction:rtl}.rtl[_ngcontent-%COMP%]   .overview-header[_ngcontent-%COMP%], .rtl[_ngcontent-%COMP%]   .stat-trend[_ngcontent-%COMP%]{flex-direction:row-reverse}@media (max-width: 768px){.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.quick-actions[_ngcontent-%COMP%]{flex-direction:column}.quick-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-top:60px;color:#333;text-align:center}.error-container.rtl[_ngcontent-%COMP%]{direction:rtl}.error-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;gap:8px;justify-content:center}"],data:{animation:[Z]}})};export{X as OverviewComponent};
